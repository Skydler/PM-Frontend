(this.webpackJsonpfrontend_pm=this.webpackJsonpfrontend_pm||[]).push([[0],{119:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(12),o=n.n(c),s=(n(119),n(10)),i=n(14),u=n(15),j=Object(r.createContext)();function l(){return Object(r.useContext)(j)}var d=n(217),b=n(2);var p=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"404 Page Not Found"}),Object(b.jsx)("p",{children:e.reason?e.reason:""}),Object(b.jsx)(i.b,{to:"/",children:Object(b.jsx)("button",{children:"Back to home"})})]})},h=n(28),m=n(18),O=n(223),x=n(197),f=n(221),v=n(199),g=n(198),k=n(95),w=n.n(k),C=n(71),y=n(188),S=n(20),N=n.n(S),F=n(37),I=n(63),W=n.n(I);function E(){var e=localStorage.getItem("tokens")||sessionStorage.getItem("tokens");e&&(W.a.defaults.headers.common.Authorization="JWT "+JSON.parse(e).access)}W.a.defaults.baseURL="https://product-manager-api.herokuapp.com/",E();var q=W.a;function D(e){return T.apply(this,arguments)}function T(){return(T=Object(F.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return q.get(e)})),r=q.all(n).then((function(e){return e.map((function(e){return e.data}))})),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return q.get("auth/users/me/").then((function(e){return e.data}))}function P(){return L.apply(this,arguments)}function L(){return(L=Object(F.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_().then((function(e){return e.product_set}));case 2:return t=e.sent,e.abrupt("return",D(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return B.apply(this,arguments)}function B(){return(B=Object(F.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_().then((function(e){return e.subproduct_set}));case 2:return t=e.sent,e.abrupt("return",D(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return J.apply(this,arguments)}function J(){return(J=Object(F.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_().then((function(e){return e.packagingobject_set}));case 2:return t=e.sent,e.abrupt("return",D(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(F.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.post("auth/jwt/create/",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(F.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.post("auth/users/",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(88);var R=function(e){var t=Object(r.useState)({username:"",password:""}),n=Object(s.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)({username:"",password:""}),u=Object(s.a)(o,2),j=u[0],l=u[1];function d(e){c(Object(m.a)(Object(m.a)({},a),{},Object(h.a)({},e.target.name,e.target.value)))}return Object(b.jsx)(y.a,{component:"main",maxWidth:"xs",children:Object(b.jsxs)("div",{className:"paper",children:[Object(b.jsx)(O.a,{className:"avatar",children:Object(b.jsx)(w.a,{})}),Object(b.jsx)(C.a,{component:"h1",variant:"h5",children:"Register"}),Object(b.jsxs)("form",{children:[Object(b.jsx)(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,error:Boolean(j.username),value:a.username,helperText:j.username||"Letters, digits and @/./+/-/_ only.",onChange:d}),Object(b.jsx)(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",error:Boolean(j.password),value:a.password,helperText:j.password||"It must contain at least 8 characters",onChange:d}),Object(b.jsx)(x.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:function(t){t.preventDefault(),function(e){return M.apply(this,arguments)}(a).then((function(){e.history.push("/login")})).catch((function(e){var t=e.response.data;l(t)}))},children:"Register"}),Object(b.jsx)(g.a,{container:!0,children:Object(b.jsx)(g.a,{item:!0,children:Object(b.jsx)(v.a,{component:i.b,to:"/login",children:"Already have an account? Log In"})})})]})]})})},G=n(200),$=n(219),H=n(96),Q=n.n(H),K=n(196);var V=function(e){var t=Object(r.useState)({username:"",password:""}),n=Object(s.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(!1),j=Object(s.a)(o,2),d=j[0],p=j[1],k=Object(r.useState)(!1),w=Object(s.a)(k,2),S=w[0],N=w[1],F=Object(u.g)(),I=e.location.state,W=I?I.referer:"/",E=l().setAuthTokens;function q(e){c(Object(m.a)(Object(m.a)({},a),{},Object(h.a)({},e.target.name,e.target.value)))}return Object(b.jsx)(y.a,{component:"main",maxWidth:"xs",children:Object(b.jsxs)("div",{className:"paper",children:[Object(b.jsx)(O.a,{className:"avatar",children:Object(b.jsx)(Q.a,{})}),Object(b.jsx)(C.a,{component:"h1",variant:"h5",children:"Log In"}),Object(b.jsxs)("form",{children:[Object(b.jsx)(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,error:S,value:a.username,onChange:q}),Object(b.jsx)(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",error:S,value:a.password,onChange:q}),S&&Object(b.jsx)(K.a,{error:!0,children:"The username or password you entered is incorrect"}),Object(b.jsx)(G.a,{control:Object(b.jsx)($.a,{value:"remember",color:"primary",onChange:function(e){return p(e.target.checked)}}),label:"Remember me"}),Object(b.jsx)(x.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:function(e){e.preventDefault(),function(e){return z.apply(this,arguments)}(a).then((function(e){E(e,d),F.push(W)})).catch((function(e){throw N(!0),e}))},children:"Log In"}),Object(b.jsx)(g.a,{container:!0,children:Object(b.jsx)(g.a,{item:!0,children:Object(b.jsx)(v.a,{component:i.b,to:"/register",children:"Don't have an account? Sign Up"})})})]})]})})},X=n(154),Y=n(202),Z=n(203),ee=n(204),te=n(205),ne=n(206),re=n(207),ae=n(208),ce=n(209);n(89);var oe=function(e){var t=Object(u.j)().url;return Object(b.jsx)(y.a,{maxWidth:"md",children:Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{className:"central-title",children:e.title}),Object(b.jsx)(X.a,{elevation:3,children:Object(b.jsx)(Y.a,{id:"table",children:Object(b.jsxs)(Z.a,{children:[Object(b.jsx)(ee.a,{children:Object(b.jsxs)(te.a,{children:[Object(b.jsx)(ne.a,{align:"center",children:"Name"}),Object(b.jsx)(ne.a,{align:"center",children:"Current stock (Lts.)"}),Object(b.jsx)(ne.a,{align:"center",children:"Liter cost"})]})}),Object(b.jsx)(re.a,{children:e.loading?Object(b.jsxs)(te.a,{children:[Object(b.jsx)(ne.a,{align:"center"}),Object(b.jsx)(ne.a,{align:"center",children:Object(b.jsx)(ae.a,{})}),Object(b.jsx)(ne.a,{align:"center"})]}):e.rows}),Object(b.jsx)(ce.a,{children:Object(b.jsxs)(te.a,{children:[Object(b.jsxs)(ne.a,{size:"small",variant:"footer",children:["Total: ",e.rows?e.rows.length:"Couldn't find any items"]}),Object(b.jsx)(ne.a,{align:"center"}),Object(b.jsx)(ne.a,{align:"center"})]})})]})})}),Object(b.jsx)("div",{children:Object(b.jsx)(x.a,{color:"primary",variant:"contained",component:i.b,to:"".concat(t,"/create"),children:"Create new"})})]})})};var se=function(e){var t=Object(u.j)().url,n=e.item;return Object(b.jsxs)(te.a,{children:[Object(b.jsx)(ne.a,{className:"pink-cell",align:"center",padding:"none",children:Object(b.jsx)(x.a,{size:"small",component:i.b,to:"".concat(t,"/").concat(n.id),children:n.name})}),Object(b.jsx)(ne.a,{align:"right",children:n.current_amount}),Object(b.jsx)(ne.a,{align:"right",children:n.price||n.cost})]})};var ie=function(e){var t=Object(r.useState)(),n=Object(s.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(!0),i=Object(s.a)(o,2),j=i[0],l=i[1],d=Object(u.j)().path,p=Object(u.h)(),h=e.getter,m=e.pathname,O=e.createComp,x=e.detailComp;return Object(r.useEffect)((function(){p.pathname==m&&h().then((function(e){var t=e.map((function(e){return Object(b.jsx)(se,{item:e},e.id)}));c(t),l(!1)}))}),[p]),Object(b.jsxs)(u.d,{children:[Object(b.jsx)(u.b,{exact:!0,path:d,render:function(){return Object(b.jsx)(oe,{rows:a,title:e.title,loading:j})}}),Object(b.jsx)(u.b,{path:"".concat(d,"/create"),component:O}),Object(b.jsx)(u.b,{path:"".concat(d,"/:itemID"),component:x})]})};function ue(e){return q.get("/api/products/".concat(e))}function je(e){return q.get("/api/subproducts/".concat(e))}function le(e){return q.get("/api/packaging/".concat(e))}function de(e){return q.post("/api/products/",e)}function be(e){return q.post("/api/subproducts/",e)}function pe(e){return q.post("/api/packaging/",e)}function he(e){return q.delete("/api/products/".concat(e))}function me(e){return q.delete("/api/subproducts/".concat(e))}function Oe(e){return q.delete("/api/packaging/".concat(e))}var xe=function(e){var t=e.form,n=e.isError,r=e.postItem,a=e.updateForm;return Object(b.jsx)(y.a,{maxWidth:"md",children:Object(b.jsx)("div",{children:Object(b.jsxs)("form",{children:[Object(b.jsx)(f.a,{required:!0,error:n,label:"Name: ",name:"name",value:t.name,onChange:a}),Object(b.jsx)(f.a,{required:!0,error:n,label:"Description: ",name:"description",value:t.description,onChange:a}),Object(b.jsx)(f.a,{required:!0,error:n,label:"Amount: ",name:"current_amount",value:t.amount,onChange:a}),"price"in t&&Object(b.jsx)(f.a,{required:!0,error:n,label:"Price: ",name:"price",value:t.price,onChange:a}),Object(b.jsx)(x.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:r,children:"Create"})]})})})};var fe=function(e){var t=Object(r.useState)(Object(m.a)({name:"",description:"",current_amount:""},e.extraFormFields)),n=Object(s.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(!1),i=Object(s.a)(o,2),j=i[0],l=i[1],d=Object(u.g)(),p=e.createItem,O=e.pathname;return Object(b.jsx)(xe,{isError:j,form:a,postItem:function(e){e.preventDefault(),p(a).then((function(){d.push(O)})).catch((function(e){throw l(!0),e}))},updateForm:function(e){c(Object(m.a)(Object(m.a)({},a),{},Object(h.a)({},e.target.name,e.target.value)))}})};var ve=function(){return Object(b.jsx)(fe,{createItem:de,pathname:"/products"})};var ge=function(e){return Object(b.jsx)(g.a,{item:!0,children:Object(b.jsxs)(X.a,{className:"grid-product-prop",children:[e.label,e.info]})})};n(90);var ke=function(e){var t=e.item;return Object(b.jsx)("div",{children:Object(b.jsxs)(g.a,{container:!0,spacing:2,direction:"row",justify:"center",children:[Object(b.jsx)(ge,{label:"Current amount: ",info:t.current_amount+" Lts."}),Object(b.jsx)(ge,{label:"Base production cost: ",info:"$"+t.price||!1})]})})},we=n(201),Ce=n(97),ye=n.n(Ce);var Se=function(e){var t=e.item,n=e.deleteFunction;return Object(b.jsxs)("div",{className:"heading-container",children:[Object(b.jsxs)("div",{className:"text-heading",children:[Object(b.jsx)("h1",{className:"product-title",children:t.name}),Object(b.jsx)("p",{className:"product-description",children:t.description})]}),Object(b.jsx)("div",{children:Object(b.jsx)(we.a,{edge:"end",onClick:function(){return n(t.id)},children:Object(b.jsx)(ye.a,{})})})]})};var Ne=function(e){var t=e.item,n=e.deleteFunction,r=e.refreshFunction,a=e.DetailExtra;return Object(b.jsxs)(y.a,{maxWidth:"md",className:"container",children:[Object(b.jsx)(Se,{item:t,deleteFunction:n}),Object(b.jsx)(ke,{item:t}),a&&Object(b.jsx)(a,{item:t,refreshFunction:r})]})};var Fe=function(e){var t=Object(r.useState)(),n=Object(s.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(!1),i=Object(s.a)(o,2),j=i[0],l=i[1],d=Object(u.i)().itemID,h=Object(u.g)(),m=e.pathname,O=e.getter,x=e.deletter;return Object(r.useEffect)((function(){O(d).then((function(e){return c(e.data)})).catch((function(e){throw l(!0),e}))}),[d]),j?Object(b.jsx)(p,{reason:"Couldn't find the item you searched for. Sorry :("}):a?Object(b.jsx)(Ne,{item:a,deleteFunction:function(e){x(e).then((function(){h.push(m)}))},refreshFunction:function(){O(d).then((function(e){return c(e.data)}))},DetailExtra:e.DetailExtra}):Object(b.jsx)(ae.a,{})},Ie=n(210),We=n(195),Ee=n(155),qe=n(211),De=n(222),Te=n(212),_e=n(213),Pe=n(194),Le=n(220),Ae=n(192),Be=n(214),Ue=n(98),Je=n.n(Ue),ze=n(99),Me=n.n(ze);function Re(e){var t=e.value,n=e.composition,r=e.refreshFunction;return Object(b.jsxs)(Ee.a,{children:["".concat(t.name,": ").concat(n.quantity),Object(b.jsx)(we.a,{edge:"end",onClick:function(){var e;(e=n.id,q.delete("/api/compositions/".concat(e))).then((function(){return r()}))},children:Object(b.jsx)(Me.a,{fontSize:"small"})})]})}var Ge=function(e){var t=e.item,n=e.refreshFunction,a=Object(r.useState)({compositions:[],usedSubproducts:[],notUsedSubproducts:[]}),c=Object(s.a)(a,2),o=c[0],i=c[1],u=Object(r.useState)({product:t.url,subproduct:"",quantity:""}),j=Object(s.a)(u,2),l=j[0],d=j[1],p=Object(r.useState)(!1),O=Object(s.a)(p,2),f=O[0],v=O[1];function g(e){d(Object(m.a)(Object(m.a)({},l),{},Object(h.a)({},e.target.name,e.target.value)))}return Object(r.useEffect)((function(){(function(e){return D(e.compositions)})(t).then((function(e){A().then((function(t){var n=e.map((function(e){return e.subproduct})),r=t.filter((function(e){return!n.includes(e.url)})),a=t.filter((function(e){return n.includes(e.url)}));i({compositions:e,usedSubproducts:a,notUsedSubproducts:r})}))}))}),[t]),Object(b.jsxs)("div",{children:[Object(b.jsx)(We.a,{children:Object(b.jsxs)(Ee.a,{children:["Makeable amount: ",t.makeable_amount]})}),Object(b.jsx)(We.a,{subheader:Object(b.jsxs)(qe.a,{component:"div",children:["Ingredients:",Object(b.jsx)(we.a,{edge:"end",onClick:function(){return v(!0)},children:Object(b.jsx)(Je.a,{})})]}),children:o.usedSubproducts.map((function(e){var t=o.compositions.filter((function(t){return t.subproduct===e.url}))[0];return Object(b.jsx)(Re,{value:e,composition:t,refreshFunction:n},e.id)}))}),Object(b.jsxs)(De.a,{open:f,onClose:function(){return v(!1)},children:[Object(b.jsx)(Te.a,{children:"Add a new ingredient"}),Object(b.jsx)(_e.a,{children:Object(b.jsxs)(Pe.a,{children:[Object(b.jsxs)(Le.a,{name:"subproduct",onChange:g,children:[Object(b.jsx)(Ie.a,{value:"",children:Object(b.jsx)("em",{children:"None"})}),o.notUsedSubproducts.map((function(e){return Object(b.jsxs)(Ie.a,{value:e.url,children:[e.name," "]},e.id)}))]}),Object(b.jsx)(Ae.a,{name:"quantity",onChange:g,placeholder:"Quantity"})]})}),Object(b.jsx)(Be.a,{children:Object(b.jsx)(x.a,{onClick:function(){var e;e=l,q.post("/api/compositions/",e),v(!1),n()},color:"primary",children:" Add "})})]})]})};var $e=function(){return Object(b.jsx)(Fe,{pathname:"/products",getter:ue,deletter:he,DetailExtra:Ge})};var He=function(){return Object(b.jsx)(ie,{getter:P,pathname:"/products",title:"Products",createComp:ve,detailComp:$e})};var Qe=function(){return Object(b.jsx)(fe,{extraFormFields:{price:""},createItem:be,pathname:"/subproducts"})};var Ke=function(){return Object(b.jsx)(Fe,{pathname:"/subproducts",getter:je,deletter:me})};var Ve=function(){return Object(b.jsx)(ie,{getter:A,pathname:"/subproducts",title:"Subproducts",createComp:Qe,detailComp:Ke})};var Xe=function(){return Object(b.jsx)(fe,{extraFormFields:{price:""},createItem:pe,pathname:"/packaging"})};var Ye=function(){return Object(b.jsx)(Fe,{pathname:"/packaging",getter:le,deletter:Oe})};var Ze=function(){return Object(b.jsx)(ie,{getter:U,pathname:"/packaging",title:"Packaging Objects",createComp:Xe,detailComp:Ye})};n(150);var et=function(){var e=Object(u.j)().path;return Object(b.jsxs)(y.a,{maxWidth:"sm",className:"container",children:[Object(b.jsx)("div",{className:"heading-container",children:Object(b.jsx)("h1",{className:"home-title",children:"Home page"})}),Object(b.jsxs)("div",{className:"home-body",children:[Object(b.jsx)(x.a,{color:"primary",variant:"contained",component:i.b,to:"".concat(e,"products"),children:"Go to products"}),Object(b.jsx)(x.a,{color:"primary",variant:"contained",component:i.b,to:"".concat(e,"subproducts"),children:"Go to subproducts"}),Object(b.jsx)(x.a,{color:"primary",variant:"contained",component:i.b,to:"".concat(e,"packaging"),children:"Go to packaging"})]})]})},tt=n(215),nt=n(216),rt=n(100),at=a.a.createContext(null);n(151);function ct(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1],c=l().setAuthTokens,o=Object(r.useContext)(at);return Object(b.jsx)("div",{children:Object(b.jsx)(tt.a,{position:"static",children:Object(b.jsxs)(nt.a,{children:[Object(b.jsx)(C.a,{variant:"h6",className:"title",children:Object(b.jsx)(i.b,{to:"/",className:"link",children:"Product Manager"})}),Object(b.jsxs)(x.a,{color:"inherit",onClick:function(e){a(e.currentTarget)},children:[" ",o?o.username:""," "]}),Object(b.jsx)(rt.a,{className:"profile-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:function(){a(null)},children:Object(b.jsx)(Ie.a,{onClick:function(){c(null)},children:"Logout"})})]})})})}var ot=function(){var e=Object(r.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(u.j)().path;return Object(r.useEffect)((function(){_().then((function(e){a(e)}))}),[]),Object(b.jsx)("div",{children:Object(b.jsxs)(at.Provider,{value:n,children:[Object(b.jsx)(ct,{}),Object(b.jsxs)(u.d,{children:[Object(b.jsx)(u.b,{exact:!0,path:c,component:et}),Object(b.jsx)(u.b,{path:"".concat(c,"products"),component:He}),Object(b.jsx)(u.b,{path:"".concat(c,"subproducts"),component:Ve}),Object(b.jsx)(u.b,{path:"".concat(c,"packaging"),component:Ze})]})]})})},st=n(101);var it=function(e){var t=e.component,n=Object(st.a)(e,["component"]),r=l().authTokens;return Object(b.jsx)(u.b,Object(m.a)(Object(m.a)({},n),{},{render:function(e){return r?Object(b.jsx)(t,Object(m.a)({},e)):Object(b.jsx)(u.a,{to:{pathname:"/login",state:{referer:e.location}}})}}))};var ut=function(){var e=localStorage.getItem("tokens")||sessionStorage.getItem("tokens"),t=Object(r.useState)(e),n=Object(s.a)(t,2),a=n[0],c=n[1];return Object(b.jsx)(j.Provider,{value:{authTokens:a,setAuthTokens:function(e,t){e?(sessionStorage.setItem("tokens",JSON.stringify(e)),t&&localStorage.setItem("tokens",JSON.stringify(e)),E()):(localStorage.removeItem("tokens"),sessionStorage.removeItem("tokens")),c(e)}},children:Object(b.jsxs)(i.a,{basename:"/PM-Frontend",children:[Object(b.jsx)(d.a,{}),Object(b.jsxs)(u.d,{children:[Object(b.jsx)(u.b,{path:"/login",component:V}),Object(b.jsx)(u.b,{path:"/register",component:R}),Object(b.jsx)(it,{path:"/",component:ot}),Object(b.jsx)(u.b,{component:p})]})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(b.jsx)(ut,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){}},[[152,1,2]]]);
//# sourceMappingURL=main.ae6f613e.chunk.js.map