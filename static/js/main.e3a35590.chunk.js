(this.webpackJsonpfrontend_pm=this.webpackJsonpfrontend_pm||[]).push([[0],{114:function(e,t,a){e.exports=a(148)},119:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a.n(c),u=(a(119),a(7)),l=a(11),i=a(33),s=Object(n.createContext)();function m(){return Object(n.useContext)(s)}var p=a(222);var d=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"404 Page Not Found"),r.a.createElement("p",null,e.reason?e.reason:""),r.a.createElement(l.b,{to:"/home"},r.a.createElement("button",null,"Back to home")))},b=a(221),f=a(196),E=a(220),h=a(198),v=a(197),g=a(91),j=a.n(g),O=a(68),k=a(187),w=a(30),S=a.n(w);a(86);var C=function(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(""),s=Object(u.a)(i,2),m=s[0],p=s[1],d=Object(n.useState)(""),g=Object(u.a)(d,2),w=g[0],C=g[1],y=Object(n.useState)(""),x=Object(u.a)(y,2),N=x[0],I=x[1];return r.a.createElement(k.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:"paper"},r.a.createElement(b.a,{className:"avatar"},r.a.createElement(j.a,null)),r.a.createElement(O.a,{component:"h1",variant:"h5"},"Register"),r.a.createElement("form",null,r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,error:Boolean(w),value:c,helperText:w||"Letters, digits and @/./+/-/_ only.",onChange:function(e){return o(e.target.value)}}),r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",error:Boolean(N),value:m,helperText:N||"It must contain at least 8 characters",onChange:function(e){return p(e.target.value)}}),r.a.createElement(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:function(t){t.preventDefault();var a={username:c,password:m};S.a.post("".concat("https://product-manager-api.herokuapp.com/auth/","users/"),a).then((function(t){201===t.status&&e.history.push("/products")})).catch((function(e){if(console.log(e.response),e.response){var t=e.response.data;C(t.username),I(t.password)}}))}},"Register"),r.a.createElement(v.a,{container:!0},r.a.createElement(v.a,{item:!0},r.a.createElement(h.a,{component:l.b,to:"/login"},"Already have an account? Log In"))))))},y=a(199),x=a(218),N=a(94),I=a.n(N),W=a(195);var F=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(!1),p=Object(u.a)(s,2),d=p[0],g=p[1],j=Object(n.useState)(""),w=Object(u.a)(j,2),C=w[0],N=w[1],F=Object(n.useState)(""),q=Object(u.a)(F,2),D=q[0],T=q[1],_=Object(n.useState)(!1),L=Object(u.a)(_,2),A=L[0],P=L[1],B=m(),J=B.authTokens,M=B.setAuthTokens,R=Object(n.useState)(J),U=Object(u.a)(R,1)[0],z=e.location.state,G=z?z.referer:"/home";return c||U?r.a.createElement(i.a,{to:G}):r.a.createElement(k.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:"paper"},r.a.createElement(b.a,{className:"avatar"},r.a.createElement(I.a,null)),r.a.createElement(O.a,{component:"h1",variant:"h5"},"Log In"),r.a.createElement("form",null,r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,error:d,value:C,onChange:function(e){return N(e.target.value)}}),r.a.createElement(E.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",error:d,value:D,onChange:function(e){return T(e.target.value)}}),d&&r.a.createElement(W.a,{error:!0},"The username or password you entered is incorrect"),r.a.createElement(y.a,{control:r.a.createElement(x.a,{value:"remember",color:"primary",onChange:function(e){return P(e.target.checked)}}),label:"Remember me"}),r.a.createElement(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:function(e){e.preventDefault();var t={username:C,password:D};S.a.post("".concat("https://product-manager-api.herokuapp.com/auth/","jwt/create/"),t).then((function(e){200===e.status?(M(e.data,A),o(!0)):g(!0)})).catch((function(e){throw g(!0),e}))}},"Log In"),r.a.createElement(v.a,{container:!0},r.a.createElement(v.a,{item:!0},r.a.createElement(h.a,{component:l.b,to:"/register"},"Don't have an account? Sign Up"))))))},q=a(21),D=a.n(q),T=localStorage.getItem("tokens")||sessionStorage.getItem("tokens");T&&(S.a.defaults.headers.common.Authorization="JWT "+JSON.parse(T).access),S.a.defaults.baseURL="https://product-manager-api.herokuapp.com/";var _=S.a;function L(e){var t,a,n,r,c,o,u,l,i;return D.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:t=[],a=!0,n=!1,r=void 0,s.prev=4,c=e[Symbol.iterator]();case 6:if(a=(o=c.next()).done){s.next=16;break}return u=o.value,s.next=10,D.a.awrap(_.get(u));case 10:l=s.sent,i=l.data,t.push(i);case 13:a=!0,s.next=6;break;case 16:s.next=22;break;case 18:s.prev=18,s.t0=s.catch(4),n=!0,r=s.t0;case 22:s.prev=22,s.prev=23,a||null==c.return||c.return();case 25:if(s.prev=25,!n){s.next=28;break}throw r;case 28:return s.finish(25);case 29:return s.finish(22);case 30:return s.abrupt("return",t);case 31:case"end":return s.stop()}}),null,null,[[4,18,22,30],[23,,25,29]])}function A(){var e,t;return D.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,D.a.awrap(_.get("auth/users/me/"));case 2:return e=a.sent,t=e.data,a.abrupt("return",t);case 5:case"end":return a.stop()}}))}function P(){var e,t;return D.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,D.a.awrap(A());case 2:return e=a.sent,t=e.subproduct_set,a.abrupt("return",L(t));case 5:case"end":return a.stop()}}))}function B(e){return _.get("/api/products/".concat(e))}var J=a(149);var M=function(e){return r.a.createElement(v.a,{item:!0},r.a.createElement(J.a,{className:"grid-product-prop"},e.label,e.info))};a(88);var R=function(e){var t=e.product;return r.a.createElement("div",null,r.a.createElement(v.a,{container:!0,spacing:2,direction:"row",justify:"center"},r.a.createElement(M,{label:"Current amount: ",info:t.current_amount+" Lts."}),r.a.createElement(M,{label:"Base production cost: ",info:"$"+t.price})))},U=a(95),z=a.n(U),G=a(200);var $=function(e){var t=e.product,a=e.deleteFunction;return r.a.createElement("div",{id:"heading-container"},r.a.createElement("div",{className:"text-heading"},r.a.createElement("h1",{className:"product-title"},t.name),r.a.createElement("p",{className:"product-description"},t.description)),r.a.createElement("div",null,r.a.createElement(G.a,{edge:"end",onClick:function(){return a(t.id)}},r.a.createElement(z.a,null))))};var H=function(e){var t=e.product,a=e.extraDetail,n=e.deleteFunction,c=e.refreshFunction;return r.a.createElement(k.a,{maxWidth:"md",id:"container"},r.a.createElement($,{product:t,deleteFunction:n}),r.a.createElement(R,{product:t}),a&&r.a.createElement(a,{product:t,refreshFunction:c}))},Q=a(28),K=a(39),V=a(194),X=a(150),Y=a(202),Z=a(96),ee=a.n(Z),te=a(219),ae=a(205),ne=a(204),re=a(203),ce=a(191),oe=a(217),ue=a(201),le=a(193),ie=a(97),se=a.n(ie);a(144);function me(e){var t=Object(n.useState)(""),a=Object(u.a)(t,2),c=a[0],o=a[1],l=e.composition,i=e.refreshFunction;return Object(n.useEffect)((function(){_.get(l.subproduct).then((function(e){return o(e.data)}))}),[l.subproduct]),r.a.createElement(X.a,{key:l.id},"".concat(c.name,": ").concat(l.quantity),r.a.createElement(G.a,{edge:"end",onClick:function(){var e;(e=l.id,_.delete("/api/compositions/".concat(e))).then((function(){return i()}))}},r.a.createElement(se.a,{fontSize:"small"})))}var pe=function(e){var t=e.product,a=e.refreshFunction,c=Object(n.useState)({compositions:[],subproducts:[]}),o=Object(u.a)(c,2),l=o[0],i=o[1],s=Object(n.useState)({subproduct:"",product:t.url,quantity:""}),m=Object(u.a)(s,2),p=m[0],d=m[1],b=Object(n.useState)(!1),E=Object(u.a)(b,2),h=E[0],v=E[1];function g(e){d(Object(K.a)({},p,Object(Q.a)({},e.target.name,e.target.value)))}return Object(n.useEffect)((function(){(function(e){return L(e.compositions)})(t).then((function(e){P().then((function(t){var a=e.map((function(e){return e.subproduct})),n=t.filter((function(e){return!a.includes(e.url)}));i({compositions:e,subproducts:n})}))}))}),[t]),r.a.createElement("div",null,r.a.createElement(V.a,null,r.a.createElement(X.a,null,"Makeable amount: ",t.makeable_amount)),r.a.createElement(V.a,{subheader:r.a.createElement(Y.a,{component:"div"},"Ingredients:",r.a.createElement(G.a,{edge:"end",onClick:function(){return v(!0)}},r.a.createElement(ee.a,null)))},l.compositions.map((function(e){return r.a.createElement(me,{composition:e,refreshFunction:a})}))),r.a.createElement(te.a,{open:h,onClose:function(){return v(!1)}},r.a.createElement(re.a,null,"Add a new ingredient"),r.a.createElement(ne.a,null,r.a.createElement(le.a,null,r.a.createElement(oe.a,{name:"subproduct",onChange:g},r.a.createElement(ue.a,{value:""},r.a.createElement("em",null,"None")),l.subproducts.map((function(e){return r.a.createElement(ue.a,{value:e.url},e.name," ")}))),r.a.createElement(ce.a,{name:"quantity",onChange:g,placeholder:"Quantity"}))),r.a.createElement(ae.a,null,r.a.createElement(f.a,{onClick:function(e){var t;t=p,_.post("/api/compositions/",t),a(),v(!1)},color:"primary"},"Add"))))};var de=function(e){var t=Object(n.useState)(),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),m=s[0],p=s[1],b=Object(i.i)().productID,f=Object(i.g)();return Object(n.useEffect)((function(){B(b).then((function(e){return o(e.data)})).catch((function(e){throw p(!0),e}))}),[b]),m?r.a.createElement(d,{reason:"Couldn't find the product you searched for. Sorry :("}):c?r.a.createElement(H,{product:c,deleteFunction:function(e){(function(e){return _.delete("/api/products/".concat(e))})(e).then((function(){f.push("/home/products")}))},refreshFunction:function(){B(b).then((function(e){return o(e.data)}))},extraDetail:pe}):"Loading..."};var be=function(e){var t=Object(n.useState)({name:"",description:"",current_amount:""}),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),m=s[0],p=s[1],d=Object(i.g)();function b(e){o(Object(K.a)({},c,Object(Q.a)({},e.target.name,e.target.value)))}return r.a.createElement(k.a,{maxWidth:"md"},r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement(E.a,{required:!0,error:m,label:"Name: ",name:"name",value:c.name,onChange:b}),r.a.createElement(E.a,{required:!0,error:m,label:"Description: ",name:"description",value:c.description,onChange:b}),r.a.createElement(E.a,{required:!0,error:m,label:"Amount: ",name:"current_amount",value:c.amount,onChange:b}),r.a.createElement(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:function(e){var t;e.preventDefault(),(t=c,_.post("/api/products/",t)).then((function(){d.push("/home/products")})).catch((function(e){throw p(!0),e}))}},"Create"))))},fe=a(206),Ee=a(207),he=a(208),ve=a(211),ge=a(212),je=a(209),Oe=a(210);a(145);var ke=function(e){var t=Object(i.j)().url;return r.a.createElement(k.a,{maxWidth:"md"},r.a.createElement("div",null,r.a.createElement("h1",{className:"central-title"},e.title),r.a.createElement(J.a,{elevation:3},r.a.createElement(fe.a,{id:"table"},r.a.createElement(Ee.a,null,r.a.createElement(he.a,null,r.a.createElement(je.a,null,r.a.createElement(Oe.a,{align:"center"},"Name"),r.a.createElement(Oe.a,{align:"center"},"Current stock (Lts.)"),r.a.createElement(Oe.a,{align:"center"},"Liter cost"))),r.a.createElement(ve.a,null,e.rows),r.a.createElement(ge.a,null,r.a.createElement(je.a,null,r.a.createElement(Oe.a,{size:"small",variant:"body"},"Total: ",e.rows?e.rows.length:"Couldn't find any products"),r.a.createElement(Oe.a,null),r.a.createElement(Oe.a,null)))))),r.a.createElement("div",null,r.a.createElement(l.b,{to:"".concat(t,"/create")},"Create new"))))};a(146);var we=function(e){var t=Object(i.j)().url,a=e.product;return r.a.createElement(je.a,null,r.a.createElement(Oe.a,{className:"pink-cell",align:"center"},r.a.createElement(h.a,{color:"inherit",underline:"none",component:l.b,to:"".concat(t,"/").concat(a.id)},r.a.createElement("div",null,a.name))),r.a.createElement(Oe.a,{align:"right"},a.current_amount),r.a.createElement(Oe.a,{align:"right"},a.price))};var Se=function(e){var t=Object(n.useState)(),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(i.j)().path,s=Object(i.h)();return Object(n.useEffect)((function(){"/home/products"===s.pathname&&function(){var e,t;return D.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,D.a.awrap(A());case 2:return e=a.sent,t=e.product_set,a.abrupt("return",L(t));case 5:case"end":return a.stop()}}))}().then((function(e){var t=e.map((function(e){return r.a.createElement(we,{key:e.id,product:e})}));o(t)}))}),[s]),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:l,render:function(){return r.a.createElement(ke,{rows:c,title:"Products"})}}),r.a.createElement(i.b,{path:"".concat(l,"/create"),component:be}),r.a.createElement(i.b,{path:"".concat(l,"/:productID"),component:de}))};var Ce=function(e){var t=Object(n.useState)(),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),m=s[0],p=s[1],b=Object(i.i)().productID,f=Object(i.g)();return Object(n.useEffect)((function(){var e;(e=b,_.get("/api/subproducts/".concat(e))).then((function(e){return o(e.data)})).catch((function(e){throw p(!0),e}))}),[b]),m?r.a.createElement(d,{reason:"Couldn't find the subproduct you searched for. Sorry :("}):c?r.a.createElement(H,{product:c,deleteFunction:function(e){(function(e){return _.delete("/api/subproducts/".concat(e))})(e).then((function(e){f.push("/home/subproducts")}))}}):"Loading..."};var ye=function(e){var t=Object(n.useState)({name:"",description:"",current_amount:"",price:""}),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),m=s[0],p=s[1],d=Object(i.g)();function b(e){o(Object(K.a)({},c,Object(Q.a)({},e.target.name,e.target.value)))}return r.a.createElement(k.a,{maxWidth:"md"},r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement(E.a,{required:!0,error:m,label:"Name: ",name:"name",value:c.name,onChange:b}),r.a.createElement(E.a,{required:!0,error:m,label:"Description: ",name:"description",value:c.description,onChange:b}),r.a.createElement(E.a,{required:!0,error:m,label:"Amount: ",name:"current_amount",value:c.amount,onChange:b}),r.a.createElement(E.a,{required:!0,error:m,label:"Price: ",name:"price",value:c.price,onChange:b}),r.a.createElement(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:function(e){var t;e.preventDefault(),(t=c,_.post("/api/subproducts/",t)).then((function(e){d.push("/home/subproducts")})).catch((function(e){throw p(!0),e}))}},"Create"))))};var xe=function(e){var t=Object(n.useState)(),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(i.j)().path,s=Object(i.h)();return Object(n.useEffect)((function(){"/home/subproducts"===s.pathname&&P().then((function(e){var t=e.map((function(e){return r.a.createElement(we,{key:e.id,product:e})}));o(t)}))}),[s]),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:l,render:function(){return r.a.createElement(ke,{rows:c,title:"Subproducts"})}}),r.a.createElement(i.b,{path:"".concat(l,"/create"),component:ye}),r.a.createElement(i.b,{path:"".concat(l,"/:productID"),component:Ce}))};var Ne=function(e){var t=Object(i.j)().path;return r.a.createElement("div",null,r.a.createElement("h1",null,"Home page"),r.a.createElement(l.b,{to:"".concat(t,"/products")},r.a.createElement("button",null,"Go to products")),r.a.createElement(l.b,{to:"".concat(t,"/subproducts")},r.a.createElement("button",null,"Go to subproducts")))},Ie=a(213),We=a(214),Fe=a(98);a(147);function qe(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),i=Object(u.a)(o,2),s=i[0],p=i[1],d=m().setAuthTokens;return a||A().then((function(e){c(e.username)})),r.a.createElement("div",null,r.a.createElement(Ie.a,{position:"static"},r.a.createElement(We.a,null,r.a.createElement(O.a,{variant:"h6",className:"title"},r.a.createElement(l.b,{to:"/home",className:"link"},"Product Manager")),r.a.createElement(f.a,{color:"inherit",onClick:function(e){p(e.currentTarget)}},a),r.a.createElement(Fe.a,{className:"profile-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:function(e){p(null)}},r.a.createElement(ue.a,{onClick:function(e){d(null)}},"Logout")))))}var De=function(e){var t=Object(i.j)().path;return r.a.createElement("div",null,r.a.createElement(qe,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:t,component:Ne}),r.a.createElement(i.b,{path:"".concat(t,"/products"),component:Se}),r.a.createElement(i.b,{path:"".concat(t,"/subproducts"),component:xe})))},Te=a(99);var _e=function(e){var t=e.component,a=Object(Te.a)(e,["component"]),n=m().authTokens;return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(i.a,{to:{pathname:"/login",state:{referer:e.location}}})}}))};var Le=function(){var e=localStorage.getItem("tokens")||sessionStorage.getItem("tokens"),t=Object(n.useState)(e),a=Object(u.a)(t,2),c=a[0],o=a[1];return r.a.createElement(s.Provider,{value:{authTokens:c,setAuthTokens:function(e,t){e?(sessionStorage.setItem("tokens",JSON.stringify(e)),t&&localStorage.setItem("tokens",JSON.stringify(e))):(localStorage.removeItem("tokens"),sessionStorage.removeItem("tokens")),o(e)}}},r.a.createElement(l.a,{basename:"/PM-Frontend"},r.a.createElement(p.a,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login",component:F}),r.a.createElement(i.b,{path:"/register",component:C}),r.a.createElement(_e,{path:"/home",component:De}),r.a.createElement(i.b,{component:d}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},86:function(e,t,a){},88:function(e,t,a){}},[[114,1,2]]]);
//# sourceMappingURL=main.e3a35590.chunk.js.map