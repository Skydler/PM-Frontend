(this.webpackJsonpfrontend_pm=this.webpackJsonpfrontend_pm||[]).push([[0],{122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a.n(c),l=(a(97),a(10)),u=a(13),s=a(29),i=Object(n.createContext)();function m(){return Object(n.useContext)(i)}var p=a(177);var d=function(e){var t=m().setAuthTokens;return r.a.createElement("div",null,r.a.createElement("h1",null,"404 Page Not Found"),r.a.createElement("p",null,e.reason?e.reason:""),r.a.createElement("button",{onClick:function(){t()}},"Logout"),r.a.createElement(u.b,{to:"/products"},r.a.createElement("button",null,"Ir a products")))},v=a(178),E=a(162),h=a(174),b=a(164),f=a(163),g=a(74),O=a.n(g),j=a(79),w=a(155),k=a(27),S=a.n(k);a(68);var y=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(""),i=Object(l.a)(s,2),m=i[0],p=i[1],d=Object(n.useState)(""),g=Object(l.a)(d,2),k=g[0],y=g[1],x=Object(n.useState)(""),C=Object(l.a)(x,2),N=C[0],I=C[1];return r.a.createElement(w.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:"paper"},r.a.createElement(v.a,{className:"avatar"},r.a.createElement(O.a,null)),r.a.createElement(j.a,{component:"h1",variant:"h5"},"Register"),r.a.createElement("form",null,r.a.createElement(h.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,error:Boolean(k),value:c,helperText:k||"Letters, digits and @/./+/-/_ only.",onChange:function(e){return o(e.target.value)}}),r.a.createElement(h.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",error:Boolean(N),value:m,helperText:N||"It must contain at least 8 characters",onChange:function(e){return p(e.target.value)}}),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:function(t){t.preventDefault();var a={username:c,password:m};S.a.post("".concat("http://localhost:8000/auth/","users/"),a).then((function(t){201===t.status&&e.history.push("/products")})).catch((function(e){if(console.log(e.response),e.response){var t=e.response.data;y(t.username),I(t.password)}}))}},"Register"),r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0},r.a.createElement(b.a,{component:u.b,to:"/login"},"Already have an account? Log In"))))))},x=a(165),C=a(176),N=a(77),I=a.n(N),W=a(161);var _=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(!1),p=Object(l.a)(i,2),d=p[0],g=p[1],O=Object(n.useState)(""),k=Object(l.a)(O,2),y=k[0],N=k[1],_=Object(n.useState)(""),T=Object(l.a)(_,2),D=T[0],L=T[1],q=Object(n.useState)(!1),A=Object(l.a)(q,2),J=A[0],P=A[1],B=m(),R=B.authTokens,U=B.setAuthTokens,F=Object(n.useState)(R),z=Object(l.a)(F,1)[0],H=e.location.state,M=H?H.referer:"/products";return c||z?r.a.createElement(s.a,{to:M}):r.a.createElement(w.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:"paper"},r.a.createElement(v.a,{className:"avatar"},r.a.createElement(I.a,null)),r.a.createElement(j.a,{component:"h1",variant:"h5"},"Log In"),r.a.createElement("form",null,r.a.createElement(h.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,error:d,value:y,onChange:function(e){return N(e.target.value)}}),r.a.createElement(h.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",error:d,value:D,onChange:function(e){return L(e.target.value)}}),d&&r.a.createElement(W.a,{error:!0},"The username or password you entered is incorrect"),r.a.createElement(x.a,{control:r.a.createElement(C.a,{value:"remember",color:"primary",onChange:function(e){return P(e.target.checked)}}),label:"Remember me"}),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:function(e){e.preventDefault();var t={username:y,password:D};S.a.post("".concat("http://localhost:8000/auth/","jwt/create/"),t).then((function(e){200===e.status?(U(e.data,J),o(!0)):g(!0)})).catch((function(e){throw g(!0),e}))}},"Log In"),r.a.createElement(f.a,{container:!0},r.a.createElement(f.a,{item:!0},r.a.createElement(b.a,{component:u.b,to:"/register"},"Don't have an account? Sign Up"))))))},T=a(15),D=a.n(T),L=localStorage.getItem("tokens")||sessionStorage.getItem("tokens");L&&(S.a.defaults.headers.common.Authorization="JWT "+JSON.parse(L).access),S.a.defaults.baseURL="http://localhost:8000/";var q=S.a;function A(e){var t,a,n,r,c,o,l,u,s;return D.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:t=[],a=!0,n=!1,r=void 0,i.prev=4,c=e[Symbol.iterator]();case 6:if(a=(o=c.next()).done){i.next=16;break}return l=o.value,i.next=10,D.a.awrap(q.get(l));case 10:u=i.sent,s=u.data,t.push(s);case 13:a=!0,i.next=6;break;case 16:i.next=22;break;case 18:i.prev=18,i.t0=i.catch(4),n=!0,r=i.t0;case 22:i.prev=22,i.prev=23,a||null==c.return||c.return();case 25:if(i.prev=25,!n){i.next=28;break}throw r;case 28:return i.finish(25);case 29:return i.finish(22);case 30:return i.abrupt("return",t);case 31:case"end":return i.stop()}}),null,null,[[4,18,22,30],[23,,25,29]])}function J(){var e,t;return D.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,D.a.awrap(q.get("auth/users/me/"));case 2:return e=a.sent,t=e.data,a.abrupt("return",t);case 5:case"end":return a.stop()}}))}var P=a(159);var B=function(e){return r.a.createElement(f.a,{item:!0},r.a.createElement(P.a,{className:"grid-product-prop"},e.label,e.info))};a(71);var R=function(e){var t=e.product;return r.a.createElement("div",null,r.a.createElement(f.a,{container:!0,spacing:2,direction:"row",justify:"center"},r.a.createElement(B,{label:"Current amount: ",info:t.current_amount}),r.a.createElement(B,{label:"Makeable amount: ",info:t.makeable_amount}),r.a.createElement(B,{label:"Base production cost: ",info:t.production_cost_liter})))};var U=function(e){var t=e.product;return r.a.createElement("div",{id:"heading-container"},r.a.createElement("h1",{className:"product-title"},t.name),r.a.createElement("p",{className:"product-description"},t.description))},F=a(160),z=a(166);var H=function(e){var t=Object(n.useState)(),a=Object(l.a)(t,2),c=a[0];return a[1],r.a.createElement("div",null,r.a.createElement(F.a,null,c),r.a.createElement(F.a,null,r.a.createElement(z.a,null,"Hola")))};var M=function(e){var t=e.product;return r.a.createElement(w.a,{maxWidth:"md",id:"container"},r.a.createElement(U,{product:t}),r.a.createElement(R,{product:t}),r.a.createElement(H,{product:t}))};var $=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)(),i=Object(l.a)(u,2),m=i[0],p=i[1],v=e.location.state,E=Object(s.g)().productID;return Object(n.useEffect)((function(){m||(v?p(v):function(){var e;D.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.awrap((a=E,q.get("/api/products/".concat(a))));case 3:e=t.sent,p(e.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),o(!0);case 10:case"end":return t.stop()}var a}),null,null,[[0,7]])}())}),[m,E,v]),c?r.a.createElement(d,{reason:"Couldn't find the product you searched for. Sorry :("}):m?r.a.createElement(M,{product:m}):"Loading..."};var G=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)(""),s=Object(l.a)(u,2),i=s[0],m=s[1],p=Object(n.useState)(""),d=Object(l.a)(p,2),v=d[0],b=d[1];return r.a.createElement(w.a,{maxWidth:"md"},r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement(h.a,{required:!0,label:"Name: ",name:"name",value:c,onChange:function(e){return o(e.target.value)}}),r.a.createElement(h.a,{required:!0,label:"Description: ",name:"description",value:i,onChange:function(e){return m(e.target.value)}}),r.a.createElement(h.a,{required:!0,label:"Amount: ",name:"amount",value:v,onChange:function(e){return b(e.target.value)}}),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:function(e){e.preventDefault(),function(e){q.post("/api/products/",e)}({name:c,description:i,current_amount:v})}},"Create"))))},K=a(167),Q=a(168),V=a(169),X=a(172),Y=a(173),Z=a(170),ee=a(171);a(122);var te=function(e){var t=Object(s.h)().url;return r.a.createElement(w.a,{maxWidth:"md"},r.a.createElement("div",null,r.a.createElement("h1",{className:"central-title"},"Dashboard"),r.a.createElement(P.a,{elevation:3},r.a.createElement(K.a,{id:"table"},r.a.createElement(Q.a,null,r.a.createElement(V.a,null,r.a.createElement(Z.a,null,r.a.createElement(ee.a,{align:"center"},"Product name"),r.a.createElement(ee.a,{align:"center"},"Current stock"),r.a.createElement(ee.a,{align:"center"},"Liter cost"))),r.a.createElement(X.a,null,e.products),r.a.createElement(Y.a,null,r.a.createElement(Z.a,null,r.a.createElement(ee.a,{size:"small",variant:"body"},"Total Productos: ",e.products?e.products.length:"Couldn't find any products"),r.a.createElement(ee.a,null),r.a.createElement(ee.a,null)))))),r.a.createElement("div",null,r.a.createElement(u.b,{to:"".concat(t,"/create")},"Crear producto"))))};a(123);var ae=function(e){var t=Object(s.h)().url,a=e.product;return r.a.createElement(Z.a,null,r.a.createElement(ee.a,{className:"pink-cell",align:"center"},r.a.createElement(b.a,{color:"inherit",underline:"none",component:u.b,to:{pathname:"".concat(t,"/").concat(a.id),state:a}},r.a.createElement("div",null,a.name))),r.a.createElement(ee.a,{align:"right"},a.current_amount),r.a.createElement(ee.a,{align:"right"},a.production_cost_liter))};var ne=function(e){var t=Object(n.useState)(),a=Object(l.a)(t,2),c=a[0],o=a[1],u=Object(s.h)().path;return c||function(){var e,t;return D.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,D.a.awrap(J());case 2:return e=a.sent,t=e.product_set,a.abrupt("return",A(t));case 5:case"end":return a.stop()}}))}().then((function(e){var t=function(e){return e.map((function(e){return r.a.createElement(ae,{key:e.id,product:e})}))}(e);o(t)})),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:u,render:function(){return r.a.createElement(te,{products:c})}}),r.a.createElement(s.b,{path:"".concat(u,"/create"),component:G}),r.a.createElement(s.b,{path:"".concat(u,"/:productID"),component:$}))},re=a(78);var ce=function(e){var t=e.component,a=Object(re.a)(e,["component"]),n=m().authTokens;return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/login",state:{referer:e.location}}})}}))};var oe=function(){var e=localStorage.getItem("tokens")||sessionStorage.getItem("tokens"),t=Object(n.useState)(e),a=Object(l.a)(t,2),c=a[0],o=a[1];return r.a.createElement(i.Provider,{value:{authTokens:c,setAuthTokens:function(e,t){e?(sessionStorage.setItem("tokens",JSON.stringify(e)),t&&localStorage.setItem("tokens",JSON.stringify(e))):(localStorage.removeItem("tokens"),sessionStorage.removeItem("tokens")),o(e)}}},r.a.createElement(u.a,null,r.a.createElement(p.a,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/login",component:_}),r.a.createElement(s.b,{path:"/register",component:y}),r.a.createElement(ce,{path:"/products",component:ne}),r.a.createElement(s.b,{component:d}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},68:function(e,t,a){},71:function(e,t,a){},92:function(e,t,a){e.exports=a(124)},97:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.bde18ec9.chunk.js.map