(this.webpackJsonpfrontend_pm=this.webpackJsonpfrontend_pm||[]).push([[0],{115:function(e,t,a){e.exports=a(149)},120:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a.n(c),u=(a(120),a(7)),l=a(11),i=a(33),s=Object(n.createContext)();function m(){return Object(n.useContext)(s)}var d=a(223);var p=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"404 Page Not Found"),r.a.createElement("p",null,e.reason?e.reason:""),r.a.createElement(l.b,{to:"/home"},r.a.createElement("button",null,"Back to home")))},f=a(21),b=a(24),E=a(224),h=a(197),v=a(221),g=a(199),j=a(198),O=a(91),w=a.n(O),k=a(68),C=a(188),S=a(20),y=a.n(S),x=a(63),N=a.n(x);function I(){var e=localStorage.getItem("tokens")||sessionStorage.getItem("tokens");e&&(N.a.defaults.headers.common.Authorization="JWT "+JSON.parse(e).access)}N.a.defaults.baseURL="https://product-manager-api.herokuapp.com/",I();var W=N.a;function q(e){var t,a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.map((function(e){return W.get(e)})),a=W.all(t).then((function(e){return e.map((function(e){return e.data}))})),n.abrupt("return",a);case 3:case"end":return n.stop()}}))}function F(){return W.get("auth/users/me/").then((function(e){return e.data}))}function _(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0!==e){a.next=6;break}return a.next=3,y.a.awrap(F().then((function(e){return e.subproduct_set})));case 3:a.t0=a.sent,a.next=7;break;case 6:a.t0=e.subproduct_set;case 7:return t=a.t0,a.abrupt("return",q(t));case 9:case"end":return a.stop()}}))}a(86);var D=function(e){var t=Object(n.useState)({username:"",password:""}),a=Object(u.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)({username:"",password:""}),s=Object(u.a)(i,2),m=s[0],d=s[1];function p(e){o(Object(b.a)({},c,Object(f.a)({},e.target.name,e.target.value)))}return r.a.createElement(C.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:"paper"},r.a.createElement(E.a,{className:"avatar"},r.a.createElement(w.a,null)),r.a.createElement(k.a,{component:"h1",variant:"h5"},"Register"),r.a.createElement("form",null,r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,error:Boolean(m.username),value:c.username,helperText:m.username||"Letters, digits and @/./+/-/_ only.",onChange:p}),r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",error:Boolean(m.password),value:c.password,helperText:m.password||"It must contain at least 8 characters",onChange:p}),r.a.createElement(h.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:function(t){var a;t.preventDefault(),(a=c,y.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.awrap(W.post("auth/users/",a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}))).then((function(t){e.history.push("/login")})).catch((function(e){var t=e.response.data;d(t)}))}},"Register"),r.a.createElement(j.a,{container:!0},r.a.createElement(j.a,{item:!0},r.a.createElement(g.a,{component:l.b,to:"/login"},"Already have an account? Log In"))))))},T=a(200),A=a(219),L=a(94),P=a.n(L),B=a(196);var U=function(e){var t=Object(n.useState)({username:"",password:""}),a=Object(u.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(!1),d=Object(u.a)(s,2),p=d[0],O=d[1],w=Object(n.useState)(!1),S=Object(u.a)(w,2),x=S[0],N=S[1],I=Object(i.g)(),q=e.location.state,F=q?q.referer:"/home",_=m().setAuthTokens;function D(e){o(Object(b.a)({},c,Object(f.a)({},e.target.name,e.target.value)))}return r.a.createElement(C.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:"paper"},r.a.createElement(E.a,{className:"avatar"},r.a.createElement(P.a,null)),r.a.createElement(k.a,{component:"h1",variant:"h5"},"Log In"),r.a.createElement("form",null,r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,error:x,value:c.username,onChange:D}),r.a.createElement(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",error:x,value:c.password,onChange:D}),x&&r.a.createElement(B.a,{error:!0},"The username or password you entered is incorrect"),r.a.createElement(T.a,{control:r.a.createElement(A.a,{value:"remember",color:"primary",onChange:function(e){return O(e.target.checked)}}),label:"Remember me"}),r.a.createElement(h.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:function(e){e.preventDefault(),function(e){var t,a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.a.awrap(W.post("auth/jwt/create/",e));case 2:return t=n.sent,a=t.data,n.abrupt("return",a);case 5:case"end":return n.stop()}}))}(c).then((function(e){_(e,p),I.push(F)})).catch((function(e){throw N(!0),e}))}},"Log In"),r.a.createElement(j.a,{container:!0},r.a.createElement(j.a,{item:!0},r.a.createElement(g.a,{component:l.b,to:"/register"},"Don't have an account? Sign Up"))))))},J=a(202),M=a(203);a(145);var R=function(e){var t=Object(i.j)().url,a=e.product;return r.a.createElement(J.a,null,r.a.createElement(M.a,{className:"pink-cell",align:"center"},r.a.createElement(g.a,{color:"inherit",underline:"none",component:l.b,to:"".concat(t,"/").concat(a.id)},r.a.createElement("div",null,a.name))),r.a.createElement(M.a,{align:"right"},a.current_amount),r.a.createElement(M.a,{align:"right"},a.price))},z=a(204),G=a(205),$=a(206),H=a(207),Q=a(208),K=a(150);a(146);var V=function(e){var t=Object(i.j)().url;return r.a.createElement(C.a,{maxWidth:"md"},r.a.createElement("div",null,r.a.createElement("h1",{className:"central-title"},e.title),r.a.createElement(K.a,{elevation:3},r.a.createElement(z.a,{id:"table"},r.a.createElement(G.a,null,r.a.createElement($.a,null,r.a.createElement(J.a,null,r.a.createElement(M.a,{align:"center"},"Name"),r.a.createElement(M.a,{align:"center"},"Current stock (Lts.)"),r.a.createElement(M.a,{align:"center"},"Liter cost"))),r.a.createElement(H.a,null,e.rows),r.a.createElement(Q.a,null,r.a.createElement(J.a,null))))),r.a.createElement("div",null,r.a.createElement(l.b,{to:"".concat(t,"/create")},"Create new"))))};function X(e){return W.get("/api/products/".concat(e))}var Y=function(e){var t=Object(n.useState)({name:"",description:"",current_amount:""}),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),m=s[0],d=s[1],p=Object(i.g)();function E(e){o(Object(b.a)({},c,Object(f.a)({},e.target.name,e.target.value)))}return r.a.createElement(C.a,{maxWidth:"md"},r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement(v.a,{required:!0,error:m,label:"Name: ",name:"name",value:c.name,onChange:E}),r.a.createElement(v.a,{required:!0,error:m,label:"Description: ",name:"description",value:c.description,onChange:E}),r.a.createElement(v.a,{required:!0,error:m,label:"Amount: ",name:"current_amount",value:c.amount,onChange:E}),r.a.createElement(h.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:function(e){var t;e.preventDefault(),(t=c,W.post("/api/products/",t)).then((function(){p.push("/home/products")})).catch((function(e){throw d(!0),e}))}},"Create"))))},Z=a(214);var ee=function(e){return r.a.createElement(j.a,{item:!0},r.a.createElement(K.a,{className:"grid-product-prop"},e.label,e.info))};a(88);var te=function(e){var t=e.product;return r.a.createElement("div",null,r.a.createElement(j.a,{container:!0,spacing:2,direction:"row",justify:"center"},r.a.createElement(ee,{label:"Current amount: ",info:t.current_amount+" Lts."}),r.a.createElement(ee,{label:"Base production cost: ",info:"$"+t.price})))},ae=a(95),ne=a.n(ae),re=a(201);var ce=function(e){var t=e.product,a=e.deleteFunction;return r.a.createElement("div",{id:"heading-container"},r.a.createElement("div",{className:"text-heading"},r.a.createElement("h1",{className:"product-title"},t.name),r.a.createElement("p",{className:"product-description"},t.description)),r.a.createElement("div",null,r.a.createElement(re.a,{edge:"end",onClick:function(){return a(t.id)}},r.a.createElement(ne.a,null))))};var oe=function(e){var t=e.product,a=e.extraDetail,n=e.deleteFunction,c=e.refreshFunction;return r.a.createElement(C.a,{maxWidth:"md",id:"container"},r.a.createElement(ce,{product:t,deleteFunction:n}),r.a.createElement(te,{product:t}),a&&r.a.createElement(a,{product:t,refreshFunction:c}))},ue=a(222),le=a(213),ie=a(212),se=a(211),me=a(194),de=a(192),pe=a(195),fe=a(151),be=a(210),Ee=a(209),he=a(220),ve=a(96),ge=a.n(ve),je=a(97),Oe=a.n(je),we=r.a.createContext(null);a(147);function ke(e){var t=e.value,a=e.quantity,n=e.refreshFunction;return r.a.createElement(fe.a,null,"".concat(t.name,": ").concat(a),r.a.createElement(re.a,{edge:"end",onClick:function(){var e;(e=t.id,W.delete("/api/compositions/".concat(e))).then((function(){return n()}))}},r.a.createElement(Oe.a,{fontSize:"small"})))}var Ce=function(e){var t=e.product,a=e.refreshFunction,c=Object(n.useState)({compositions:[],usedSubproducts:[],notUsedSubproducts:[]}),o=Object(u.a)(c,2),l=o[0],i=o[1],s=Object(n.useState)({subproduct:"",product:t.url,quantity:""}),m=Object(u.a)(s,2),d=m[0],p=m[1],E=Object(n.useState)(!1),v=Object(u.a)(E,2),g=v[0],j=v[1],O=Object(n.useContext)(we);function w(e){p(Object(b.a)({},d,Object(f.a)({},e.target.name,e.target.value)))}return Object(n.useEffect)((function(){(function(e){return q(e.compositions)})(t).then((function(e){_(O).then((function(t){var a=e.map((function(e){return e.subproduct})),n=t.filter((function(e){return!a.includes(e.url)})),r=t.filter((function(e){return a.includes(e.url)}));i({compositions:e,usedSubproducts:r,notUsedSubproducts:n})}))}))}),[t,O]),r.a.createElement("div",null,r.a.createElement(pe.a,null,r.a.createElement(fe.a,null,"Makeable amount: ",t.makeable_amount)),r.a.createElement(pe.a,{subheader:r.a.createElement(be.a,{component:"div"},"Ingredients:",r.a.createElement(re.a,{edge:"end",onClick:function(){return j(!0)}},r.a.createElement(ge.a,null)))},l.usedSubproducts.map((function(e){var t=l.compositions.filter((function(t){return t.subproduct===e.url}))[0].quantity;return r.a.createElement(ke,{key:e.id,value:e,quantity:t,refreshFunction:a})}))),r.a.createElement(ue.a,{open:g,onClose:function(){return j(!1)}},r.a.createElement(se.a,null,"Add a new ingredient"),r.a.createElement(ie.a,null,r.a.createElement(me.a,null,r.a.createElement(he.a,{name:"subproduct",onChange:w},r.a.createElement(Ee.a,{value:""},r.a.createElement("em",null,"None")),l.notUsedSubproducts.map((function(e){return r.a.createElement(Ee.a,{key:e.id,value:e.url},e.name," ")}))),r.a.createElement(de.a,{name:"quantity",onChange:w,placeholder:"Quantity"}))),r.a.createElement(le.a,null,r.a.createElement(h.a,{onClick:function(){var e;e=d,W.post("/api/compositions/",e),a(),j(!1)},color:"primary"},"Add"))))};var Se=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(u.a)(o,2),s=l[0],m=l[1],d=Object(i.i)().productID,f=Object(i.g)();return Object(n.useEffect)((function(){X(d).then((function(e){return c(e.data)})).catch((function(e){throw m(!0),e}))}),[d]),s?r.a.createElement(p,{reason:"Couldn't find the product you searched for. Sorry :("}):a?r.a.createElement(oe,{product:a,deleteFunction:function(e){(function(e){return W.delete("/api/products/".concat(e))})(e).then((function(){f.push("/home/products")}))},refreshFunction:function(){X(d).then((function(e){return c(e.data)}))},extraDetail:Ce}):r.a.createElement(Z.a,null)};var ye=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!0),l=Object(u.a)(o,2),s=l[0],m=l[1],d=Object(i.j)().path,p=Object(i.h)(),f=Object(n.useContext)(we);return Object(n.useEffect)((function(){"/home/products"===p.pathname&&void 0!==f&&function(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0!==e){a.next=6;break}return a.next=3,y.a.awrap(F().then((function(e){return e.product_set})));case 3:a.t0=a.sent,a.next=7;break;case 6:a.t0=e.product_set;case 7:return t=a.t0,a.abrupt("return",q(t));case 9:case"end":return a.stop()}}))}(f).then((function(e){var t=e.map((function(e){return r.a.createElement(R,{key:e.id,product:e})}));c(t),m(!1)}))}),[p,f]),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:d,render:function(){return r.a.createElement(V,{rows:a,title:"Products",loading:s})}}),r.a.createElement(i.b,{path:"".concat(d,"/create"),component:Y}),r.a.createElement(i.b,{path:"".concat(d,"/:productID"),component:Se}))};var xe=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(u.a)(o,2),s=l[0],m=l[1],d=Object(i.i)().productID,f=Object(i.g)();return Object(n.useEffect)((function(){var e;(e=d,W.get("/api/subproducts/".concat(e))).then((function(e){return c(e.data)})).catch((function(e){throw m(!0),e}))}),[d]),s?r.a.createElement(p,{reason:"Couldn't find the subproduct you searched for. Sorry :("}):a?r.a.createElement(oe,{product:a,deleteFunction:function(e){(function(e){return W.delete("/api/subproducts/".concat(e))})(e).then((function(){f.push("/home/subproducts")}))}}):r.a.createElement(Z.a,null)};var Ne=function(e){var t=Object(n.useState)({name:"",description:"",current_amount:"",price:""}),a=Object(u.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),m=s[0],d=s[1],p=Object(i.g)();function E(e){o(Object(b.a)({},c,Object(f.a)({},e.target.name,e.target.value)))}return r.a.createElement(C.a,{maxWidth:"md"},r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement(v.a,{required:!0,error:m,label:"Name: ",name:"name",value:c.name,onChange:E}),r.a.createElement(v.a,{required:!0,error:m,label:"Description: ",name:"description",value:c.description,onChange:E}),r.a.createElement(v.a,{required:!0,error:m,label:"Amount: ",name:"current_amount",value:c.amount,onChange:E}),r.a.createElement(v.a,{required:!0,error:m,label:"Price: ",name:"price",value:c.price,onChange:E}),r.a.createElement(h.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit",onClick:function(e){var t;e.preventDefault(),(t=c,W.post("/api/subproducts/",t)).then((function(e){p.push("/home/subproducts")})).catch((function(e){throw d(!0),e}))}},"Create"))))};var Ie=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(i.j)().path,l=Object(i.h)(),s=Object(n.useContext)(we);return Object(n.useEffect)((function(){"/home/subproducts"===l.pathname&&void 0!==s&&_(s).then((function(e){var t=e.map((function(e){return r.a.createElement(R,{key:e.id,product:e})}));c(t)}))}),[l,s]),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:o,render:function(){return r.a.createElement(V,{rows:a,title:"Subproducts"})}}),r.a.createElement(i.b,{path:"".concat(o,"/create"),component:Ne}),r.a.createElement(i.b,{path:"".concat(o,"/:productID"),component:xe}))};var We=function(){var e=Object(i.j)().path;return r.a.createElement("div",null,r.a.createElement("h1",null,"Home page"),r.a.createElement(l.b,{to:"".concat(e,"/products")},r.a.createElement("button",null,"Go to products")),r.a.createElement(l.b,{to:"".concat(e,"/subproducts")},r.a.createElement("button",null,"Go to subproducts")))},qe=a(215),Fe=a(216),_e=a(98);a(148);function De(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1],o=m().setAuthTokens,i=Object(n.useContext)(we);return r.a.createElement("div",null,r.a.createElement(qe.a,{position:"static"},r.a.createElement(Fe.a,null,r.a.createElement(k.a,{variant:"h6",className:"title"},r.a.createElement(l.b,{to:"/home",className:"link"},"Product Manager")),r.a.createElement(h.a,{color:"inherit",onClick:function(e){c(e.currentTarget)}}," ",i?i.username:""," "),r.a.createElement(_e.a,{className:"profile-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:function(){c(null)}},r.a.createElement(Ee.a,{onClick:function(){o(null)}},"Logout")))))}var Te=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(i.j)().path;return Object(n.useEffect)((function(){F().then((function(e){c(e)}))}),[]),r.a.createElement("div",null,r.a.createElement(we.Provider,{value:a},r.a.createElement(De,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:o,component:We}),r.a.createElement(i.b,{path:"".concat(o,"/products"),component:ye}),r.a.createElement(i.b,{path:"".concat(o,"/subproducts"),component:Ie}))))},Ae=a(99);var Le=function(e){var t=e.component,a=Object(Ae.a)(e,["component"]),n=m().authTokens;return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(i.a,{to:{pathname:"/login",state:{referer:e.location}}})}}))};var Pe=function(){var e=localStorage.getItem("tokens")||sessionStorage.getItem("tokens"),t=Object(n.useState)(e),a=Object(u.a)(t,2),c=a[0],o=a[1];return r.a.createElement(s.Provider,{value:{authTokens:c,setAuthTokens:function(e,t){e?(sessionStorage.setItem("tokens",JSON.stringify(e)),t&&localStorage.setItem("tokens",JSON.stringify(e)),I()):(localStorage.removeItem("tokens"),sessionStorage.removeItem("tokens")),o(e)}}},r.a.createElement(l.a,{basename:"/PM-Frontend"},r.a.createElement(d.a,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login",component:U}),r.a.createElement(i.b,{path:"/register",component:D}),r.a.createElement(Le,{path:"/home",component:Te}),r.a.createElement(i.b,{component:p}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},86:function(e,t,a){},88:function(e,t,a){}},[[115,1,2]]]);
//# sourceMappingURL=main.f77e377a.chunk.js.map